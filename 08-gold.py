__import__("sys").setrecursionlimit(100000)or print((lambda a:lambda x:a(a,x,{}))(lambda a,x,u,i=0:x and(x[0].split(" ")[0]in u or u.update({x[0].split(" ")[0]:0})or 1)and(x[0].split(" ")[4] in u or u.update({x[0].split(" ")[4]:0})or 1)and(u.update({x[0].split(" ")[0]:u[x[0].split(" ")[0]]+(-1)**(x[0].split(" ")[1]=="dec")*int(x[0].split(" ")[2])*eval(" ".join(x[0].split(" ")[4:]),u)})or 1)and a(a,x[1:],u,max(i,max(u[k]for k in u if k!="__builtins__")))or i)(__import__("sys").stdin.readlines()))
